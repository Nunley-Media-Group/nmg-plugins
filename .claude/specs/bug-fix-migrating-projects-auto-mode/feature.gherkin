# File: .claude/specs/46-fix-migrating-projects-auto-mode/feature.gherkin
#
# Generated from: .claude/specs/46-fix-migrating-projects-auto-mode/requirements.md
# Issue: #46
# Type: Defect regression

@regression
Feature: migrating-projects ignores auto-mode
  The migrating-projects skill previously skipped its interactive review gate
  when `.claude/auto-mode` existed in the project directory.
  This was fixed by adding an explicit Automation Mode section to SKILL.md
  that overrides the auto-mode convention for this skill.

  # --- Bug Is Fixed ---

  @regression
  Scenario: Review gate is always interactive even with auto-mode
    Given a project with `.claude/auto-mode` present
    And the project has outdated steering docs with missing sections
    When `/migrating-projects` runs and identifies changes to merge
    Then proposed changes are presented for review via AskUserQuestion
    And no files are modified until the user explicitly approves

  # --- Related Behavior Still Works ---

  @regression
  Scenario: Review gate works without auto-mode
    Given a project without `.claude/auto-mode`
    And the project has outdated steering docs with missing sections
    When `/migrating-projects` runs and identifies changes to merge
    Then proposed changes are presented for review via AskUserQuestion
    And no files are modified until the user explicitly approves

  @regression
  Scenario: Other SDLC skills still respect auto-mode
    Given a project with `.claude/auto-mode` present
    When an SDLC skill with auto-mode support runs (e.g., `/writing-specs`)
    Then that skill's review gates are correctly skipped per the auto-mode convention
